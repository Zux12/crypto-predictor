<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GO/NO-GO</title>
<style>
  :root{ --bg:#0f172a; --card:#111827; --muted:#9ca3af; --text:#e5e7eb; --good:#22c55e; --bad:#ef4444; }
  body{ margin:0; background:var(--bg); color:var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
  .wrap{ max-width:700px; margin:16px auto; padding:0 12px; }
  .row{ background:var(--card); border-radius:16px; padding:14px; margin:10px 0; box-shadow:0 10px 25px rgba(0,0,0,.35); }
  .coin{ font-size:18px; font-weight:700; display:flex; justify-content:space-between; align-items:center; }
  .status{ font-weight:700; }
  .go{ color:var(--good) } .nogo{ color:var(--bad) }
  .muted{ color:var(--muted); font-size:13px }
  .timers{ display:flex; gap:12px; margin-top:6px; font-variant-numeric: tabular-nums; }
  .btn{ background:#1f2937; color:#d1d5db; border:1px solid #374151; border-radius:10px; padding:8px 12px; cursor:pointer; }
  .topbar{ display:flex; gap:8px; align-items:center; margin-bottom:10px }
</style>

  <style>
  /* === Chips UI (optional) === */
  .chips { display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
  .chip {
    display:inline-flex; align-items:center; gap:6px;
    padding:4px 8px; border-radius:999px; font-size:12px; line-height:1;
    border:1px solid #374151; background:#111827; color:#d1d5db;
  }
  .chip b { font-weight:700 }
  .chip-conf.ok   { border-color:#2563eb } /* blue edge */
  .chip-conf.warn { border-color:#f59e0b } /* amber edge */
  .chip-conf.bad  { border-color:#ef4444 } /* red edge  */
  .chip-dip       { border-color:#22c55e; }
  .chip .dot { width:8px; height:8px; border-radius:50%; background:#6b7280 }
  .chip-conf.ok   .dot { background:#2563eb }
  .chip-conf.warn .dot { background:#f59e0b }
  .chip-conf.bad  .dot { background:#ef4444 }
  .chip-dip .dot       { background:#22c55e }
    .chip-signal.ok   { border-color:#22c55e }  /* green */
  .chip-signal.warn { border-color:#f59e0b }  /* amber */

  /* Tiny toggle group in the topbar */
  .toggles { margin-left:auto; display:flex; gap:10px; align-items:center; }
  .toggles label { font-size:12px; color:#9ca3af; display:flex; gap:6px; align-items:center; }
  .toggles input { accent-color:#22c55e; }

  

</style>
  <style>
  .badge {
    margin-left: 8px;
    padding: 3px 8px;
    border: 1px solid #374151;
    border-radius: 999px;
    font-size: 12px;
    color: #a7f3d0;           /* mint text */
    background: #064e3b;      /* deep green pill */
  }
</style>


</head>
<body>
<div class="wrap">
  <div class="topbar">
    <button class="btn" onclick="location.href='/metrics.html'">← Back to Metrics</button>
    <button id="refresh" class="btn">Refresh</button>
    <span id="asof" class="muted"></span>
    <div class="toggles">
  <label><input id="toggle-conf" type="checkbox" checked> Confidence</label>
  <label><input id="toggle-dip"  type="checkbox"> Near-dip</label>
</div>

  </div>

  <div id="btc" class="row"></div>
  <div id="eth" class="row"></div>

  <div class="muted" style="margin-top:10px">
    Rule: v4-xau p_up ∈ [70%,74%); 7d bucket avg ≥ 0; n ≥ 50. Entry window 1h; exit 24h.
  </div>
</div>


  
<script src="/go.js"></script>
  <script src="/chips.js?v=2"></script>
<script src="/combined-signal.js?v=cs-20250921-1555"></script>


<!-- Notes: Confidence & Near-dip (for future you) -->
<details class="muted" style="margin:12px 0; color:#9ca3af">
  <summary>Notes: Confidence & Near-dip</summary>
  <div style="margin-top:6px; font-size:12px">
    <p><b>Confidence chip</b> shows <code>p_up</code>, <code>n</code>, and the recent 7-day bucket average return parsed from the reason string (e.g., <i>“p_up=60.3% • 7d(70–74%) +0.43% (n=92)”</i>). Border color hints:
      <ul style="margin:6px 0 6px 16px">
        <li><b>Blue</b>: p_up ≥ 55% and bucket ≥ 0 (informational OK)</li>
        <li><b>Amber</b>: p_up between ~50–55% or bucket slightly negative</li>
        <li><b>Red</b>: p_up < 50% or clearly negative bucket</li>
      </ul>
    </p>
    <p><b>Near-dip chip</b> is <i>optional</i> and purely informational. By default it’s off. If your backend sets <code>window.NEAR_DIP_MAP = { bitcoin:true/false, ethereum:true/false }</code> or if a <code>data-near-dip="1"</code> attribute appears on a coin row, the green “Near-dip” chip will show. You can later wire this to RSI&lt;30 + price ≤ lower-band.</p>
    <p>You can toggle chips using the checkboxes above; state persists in <code>localStorage</code>.</p>
  </div>
</details>
  
  <details class="muted" style="margin:12px 0; color:#9ca3af">
  <summary>Notes: Micro-Combined (v4-xau ∧ RSI/Bollinger)</summary>
  <div style="margin-top:6px; font-size:12px; line-height:1.5">
    <p><b>What you’ll see under each coin</b></p>
    <ul style="margin:6px 0 10px 18px">
      <li><b>Conf</b> — confidence hint from v4-xau (p_up • n • 7d bucket). Colors: blue=OK, amber=borderline, red=weak.</li>
      <li><b>Watch (v4 OK)</b> — v4 gate is ON (p_up ≥ 0.55, n ≥ 50, bucket ≥ −0.10bp here), but dip trigger not yet detected. We’re waiting for a flip-dip.</li>
      <li><b>⚡ BUY (Micro)</b> — <u>both</u> v4 gate and dip trigger are ON within the entry window. The chip shows exits: <b>TP +0.30%</b> • <b>SL −0.20%</b> • <b>max hold 2h</b>.</li>
      <li><span style="opacity:.85">dbg v4:true/false dip:true/false</span> — temporary debug line so you can verify the live state (remove by setting <code>DEBUG=false</code> in <code>combined-signal.js</code>).</li>
    </ul>

    <p><b>Current preset</b> (can be tuned later): p_up ≥ <b>0.55</b>, n ≥ <b>50</b>, bucket ≥ <b>−0.001</b>; dip = <b>flip</b> (RSI turning up) within ±<b>30m</b>, Bollinger <b>1.5σ</b>. Returns evaluated on 0.5h/1h/2h horizons.</p>

    <p><b>Why you may see Watch on ETH but not BTC:</b> v4 varies by coin/time. If a coin’s p_up is below the threshold (e.g., BTC ~51–52%), it won’t show Watch/Buy until v4 recovers. BUY only appears when a valid dip happens during the entry window <i>and</i> v4 stays ON.</p>

    <p style="margin-top:10px"><b>Trading rule (micro)</b>: Enter on <b>⚡ BUY (Micro)</b> before “Entry until …” expires. Exit on <b>TP +0.30%</b>, <b>SL −0.20%</b>, or <b>max 2h</b> — whichever comes first. (Optional: once unrealized &gt; +0.20%, trail by 0.15%.)</p>
  </div>
</details>


</body>
</html>
